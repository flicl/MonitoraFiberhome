<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>6.0</version>
    <date>2024-02-18T12:00:00Z</date>
    <groups>
        <group>
            <uuid>7df96b18c230490a9a0a9e2307226338</uuid>
            <name>Templates/Network Devices</name>
        </group>
    </groups>
    <templates>
        <template>
            <uuid>a308b3e8c9b24466b041695503434691</uuid>
            <template>Template_OLT_Fiberhome_RP1000</template>
            <name>Template OLT Fiberhome RP1000</name>
            <description>Template para monitoramento de OLTs Fiberhome RP1000+ (AN5116-06B / AN5516-01)&#13;
&#13;
Requer scripts externos:&#13;
- GetPONName.py (LLD SNMP)&#13;
- GetONUOnline.py (Telnet)&#13;
- GetONUSignal.py (Telnet)&#13;
&#13;
Macros obrigatórias:&#13;
{$OLT_USER} - Usuário Telnet&#13;
{$OLT_PASSWORD} - Senha Telnet&#13;
{$OLT_PORT} - Porta Telnet (padrão 23)&#13;
{$SNMP_COMMUNITY} - Comunidade SNMP&#13;
{$SNMP_PORT} - Porta SNMP (padrão 161)</description>
            <groups>
                <group>
                    <name>Templates/Network Devices</name>
                </group>
            </groups>
            <items>
                <item>
                    <uuid>c5325854817d4760b298418302194372</uuid>
                    <name>Total ONUs Offline (Global)</name>
                    <type>TRAP</type>
                    <key>TotalOntOffline</key>
                    <history>7d</history>
                    <trends>90d</trends>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Fiberhome Overview</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>8784725350414777b7320092c2539074</uuid>
                    <name>Total ONUs Online (Global)</name>
                    <type>TRAP</type>
                    <key>TotalOntOnline</key>
                    <history>7d</history>
                    <trends>90d</trends>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Fiberhome Overview</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>4024328594244908ba67142445831557</uuid>
                    <name>Total ONUs Provisionadas (Global)</name>
                    <type>TRAP</type>
                    <key>TotalOntProvisioned</key>
                    <history>7d</history>
                    <trends>90d</trends>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>Fiberhome Overview</value>
                        </tag>
                    </tags>
                </item>
            </items>
            <discovery_rules>
                <discovery_rule>
                    <uuid>2257007727144e59bf46162507663242</uuid>
                    <name>PON Discovery</name>
                    <type>EXTERNAL</type>
                    <key>GetPONName.py[{HOST.CONN},{$SNMP_COMMUNITY},{HOST.HOST},{$OLT_USER},{$OLT_PASSWORD},{$OLT_PORT},{$SNMP_PORT}]</key>
                    <delay>1h</delay>
                    <filter>
                        <evaltype>AND</evaltype>
                        <conditions>
                            <condition>
                                <macro>{#PONNAME}</macro>
                                <value>.*</value>
                                <formulaid>A</formulaid>
                            </condition>
                        </conditions>
                    </filter>
                    <item_prototypes>
                        <item_prototype>
                            <uuid>8c038374246440268584825946394235</uuid>
                            <name>Melhor Sinal dBm - PON {#PONNAME}</name>
                            <type>TRAP</type>
                            <key>OntBestSinal.[{#PONNAME}]</key>
                            <history>7d</history>
                            <trends>90d</trends>
                            <value_type>FLOAT</value_type>
                            <units>dBm</units>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>PON Signals</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>7c038374246440268584825946394236</uuid>
                            <name>Média Sinal dBm - PON {#PONNAME}</name>
                            <type>TRAP</type>
                            <key>OntMediaSinal.[{#PONNAME}]</key>
                            <history>7d</history>
                            <trends>90d</trends>
                            <value_type>FLOAT</value_type>
                            <units>dBm</units>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>PON Signals</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>6c038374246440268584825946394237</uuid>
                            <name>Pior Sinal dBm - PON {#PONNAME}</name>
                            <type>TRAP</type>
                            <key>OntPoorSinal.[{#PONNAME}]</key>
                            <history>7d</history>
                            <trends>90d</trends>
                            <value_type>FLOAT</value_type>
                            <units>dBm</units>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>PON Signals</value>
                                </tag>
                            </tags>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <uuid>5c038374246440268584825946394238</uuid>
                                    <expression>last(/Template_OLT_Fiberhome_RP1000/OntPoorSinal.[{#PONNAME}])&gt;30</expression>
                                    <name>Sinal Crítico (&gt; -30dBm) na PON {#PONNAME}</name>
                                    <priority>HIGH</priority>
                                    <description>Pior sinal da PON está acima de 30dBm (perda alta).</description>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <uuid>4d038374246440268584825946394239</uuid>
                            <name>ONUs Offline - PON {#PONNAME}</name>
                            <type>TRAP</type>
                            <key>OntOffline.[{#PONNAME}]</key>
                            <history>7d</history>
                            <trends>90d</trends>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>PON Status</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>3d038374246440268584825946394240</uuid>
                            <name>ONUs Online - PON {#PONNAME}</name>
                            <type>TRAP</type>
                            <key>OntOnline.[{#PONNAME}]</key>
                            <history>7d</history>
                            <trends>90d</trends>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>PON Status</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>2d038374246440268584825946394241</uuid>
                            <name>ONUs Provisionadas - PON {#PONNAME}</name>
                            <type>TRAP</type>
                            <key>OntProvisioned.[{#PONNAME}]</key>
                            <history>7d</history>
                            <trends>90d</trends>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>PON Status</value>
                                </tag>
                            </tags>
                        </item_prototype>
                    </item_prototypes>
                    <graph_prototypes>
                        <graph_prototype>
                            <uuid>1a038374246440268584825946394242</uuid>
                            <name>Sinais Ópticos - PON {#PONNAME}</name>
                            <graph_items>
                                <graph_item>
                                    <color>00FF00</color>
                                    <item>
                                        <host>Template_OLT_Fiberhome_RP1000</host>
                                        <key>OntBestSinal.[{#PONNAME}]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <color>0000FF</color>
                                    <item>
                                        <host>Template_OLT_Fiberhome_RP1000</host>
                                        <key>OntMediaSinal.[{#PONNAME}]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>2</sortorder>
                                    <color>FF0000</color>
                                    <item>
                                        <host>Template_OLT_Fiberhome_RP1000</host>
                                        <key>OntPoorSinal.[{#PONNAME}]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                        <graph_prototype>
                            <uuid>0b038374246440268584825946394243</uuid>
                            <name>Status ONUs - PON {#PONNAME}</name>
                            <graph_items>
                                <graph_item>
                                    <drawtype>FILLED_REGION</drawtype>
                                    <color>00AA00</color>
                                    <item>
                                        <host>Template_OLT_Fiberhome_RP1000</host>
                                        <key>OntOnline.[{#PONNAME}]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <drawtype>BOLD_LINE</drawtype>
                                    <color>FF0000</color>
                                    <item>
                                        <host>Template_OLT_Fiberhome_RP1000</host>
                                        <key>OntOffline.[{#PONNAME}]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                    </graph_prototypes>
                </discovery_rule>
            </discovery_rules>
            <macros>
                <macro>
                    <macro>{$OLT_PASSWORD}</macro>
                    <value>GEPON</value>
                </macro>
                <macro>
                    <macro>{$OLT_PORT}</macro>
                    <value>23</value>
                </macro>
                <macro>
                    <macro>{$OLT_USER}</macro>
                    <value>GEPON</value>
                </macro>
                <macro>
                    <macro>{$SNMP_COMMUNITY}</macro>
                    <value>public</value>
                </macro>
                <macro>
                    <macro>{$SNMP_PORT}</macro>
                    <value>161</value>
                </macro>
            </macros>
        </template>
    </templates>
</zabbix_export>
